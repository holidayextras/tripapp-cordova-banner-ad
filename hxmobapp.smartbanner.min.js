!function(a){var b=function(b){this.origHtmlMargin=parseFloat(a("html").css("margin-top")),this.options=a.extend({},a.smartbanner.defaults,b);var c=navigator.standalone,d=navigator.userAgent;this.options.force?this.type=this.options.force:null!=d.match(/iPad|iPhone|iPod/i)?null!=d.match(/Safari/i)&&(null!=d.match(/CriOS/i)||window.Number(navigator.userAgent.substr(navigator.userAgent.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):null!=d.match(/Android/i)&&null===d.match(/Silk|Kindle/i)&&(this.type="android"),!this.type||c||this.getCookie("sb-closed")||this.getCookie("sb-installed")||(this.scale="auto"==this.options.scale?a(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1),this.title=this.options.title,this.author=this.options.author,this.create(),this.show(),this.listen())};b.prototype={constructor:b,create:function(){var b=this.options.icon,c=this.options.urlParams?this.options.url+"?"+a.param(this.options.urlParams):this.options.url,d="ios"===this.type?this.options.inAppStore:this.options.inGooglePlay;a("body").append('<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon" style="background-image:url('+b+');"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+d+'</span></div><a href="'+c+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>"),this.bannerHeight=a("#smartbanner").outerHeight()+2,this.scale>1&&(a("#smartbanner").css("top",parseFloat(a("#smartbanner").css("top"))*this.scale).css("height",parseFloat(a("#smartbanner").css("height"))*this.scale),a("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",a(window).width()/this.scale))},listen:function(){a("#smartbanner .sb-close").on("click",a.proxy(this.close,this)),a("#smartbanner .sb-button").on("click",a.proxy(this.install,this))},show:function(){a("#smartbanner").css("top","0px").addClass("shown"),a("html").css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale+"px")},hide:function(){a("#smartbanner").css("top",-1*this.bannerHeight*this.scale+"px").removeClass("shown"),a("html").css("margin-top",this.origHtmlMargin)},close:function(a){a.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(){this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),b=escape(b)+(null==c?"":"; expires="+d.toUTCString()),document.cookie=a+"="+b+"; path=/;"},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d);return null}},a.smartbanner=function(c){var d=a(window),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(f)),"string"==typeof c&&e[c]()},a.smartbanner.defaults={title:"Holiday Extras",author:"Holiday Extras Ltd.",inAppStore:"Free On the App Store",inGooglePlay:"Free On Google Play",icon:"app-icon.jpg",button:"VIEW",url:"http://mobile.holidayextras.co.uk/redirect",urlParams:null,scale:"auto",daysHidden:15,daysReminder:90,force:null},a.smartbanner.Constructor=b}(window.jQuery);